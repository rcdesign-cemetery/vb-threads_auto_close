<?xml version="1.0" encoding="ISO-8859-1"?>

<product productid="rcd_thread_auto_closing" active="1">
	<title>Thread auto closing</title>
	<description />
	<version>0.1</version>
	<url />
	<versioncheckurl />
	<dependencies>
	</dependencies>
	<codes>
	</codes>
	<templates>
	</templates>
	<stylevardfns>
	</stylevardfns>
	<stylevars>
	</stylevars>
	<plugins>
		<plugin active="1" executionorder="5">
			<title>Close old thread</title>
			<hookname>cron_script_cleanup_daily</hookname>
			<phpcode><![CDATA[$tac_timeline = TIMENOW - (int)$vbulletin->options['tac_time_line'] * 60*60*24;
if ($tac_timeline > 0)
{
    $sql = 'UPDATE
                ' . TABLE_PREFIX . 'thread
			SET
                open = 0
            WHERE
                lastpost < ' . $tac_timeline .
                ' AND open = 1 ';
    if (! $vbulletin->options['tac_can_stickie_closed'])
    {
        $sql .= ' AND sticky = 0 ';
    }
    $vbulletin->db->query_write($sql);
}
unset($tac_timeline);]]></phpcode>
		</plugin>
	</plugins>
	<phrases>
		<phrasetype name="vBulletin Settings" fieldname="vbsettings">
			<phrase name="setting_tac_can_stickie_closed_desc" date="1273645355" username="varnak" version="0.1"><![CDATA[Should be closed stickied threads or not]]></phrase>
			<phrase name="setting_tac_can_stickie_closed_title" date="1273645355" username="varnak" version="0.1"><![CDATA[Close sticky threads]]></phrase>
			<phrase name="setting_tac_time_line_desc" date="1273645081" username="varnak" version="0.1"><![CDATA[Time (in days) after which the thread will be closed]]></phrase>
			<phrase name="setting_tac_time_line_title" date="1273645081" username="varnak" version="0.1"><![CDATA[Thread time line]]></phrase>
			<phrase name="settinggroup_rcd_thread_auto_closing" date="1273637541" username="varnak" version="0.1"><![CDATA[Thread auto closing]]></phrase>
		</phrasetype>
	</phrases>
	<options>
		<settinggroup name="rcd_thread_auto_closing" displayorder="65535">
			<setting varname="tac_time_line" displayorder="10">
				<datatype>integer</datatype>
				<defaultvalue>365</defaultvalue>
			</setting>
			<setting varname="tac_can_stickie_closed" displayorder="20">
				<datatype>boolean</datatype>
				<optioncode>yesno</optioncode>
				<defaultvalue>0</defaultvalue>
			</setting>
		</settinggroup>
	</options>
	<helptopics>
	</helptopics>
	<cronentries>
	</cronentries>
	<faqentries>
	</faqentries>
	<templateedits>
	</templateedits>
</product>
