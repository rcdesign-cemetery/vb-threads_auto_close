<?xml version="1.0" encoding="ISO-8859-1"?>

<product productid="rcd_thread_auto_closing" active="1">
	<title>Threads Auto Close</title>
	<description />
	<version>0.2</version>
	<url><![CDATA[http://www.vbulletin.org/forum/misc.php?do=producthelp&pid=rcd_thread_auto_closing]]></url>
	<versioncheckurl><![CDATA[http://www.vbulletin.org/forum/misc.php?do=productcheck&pid=rcd_thread_auto_closing]]></versioncheckurl>
	<apm_releasedate></apm_releasedate>
	<apm_author></apm_author>
	<apm_relatedurl></apm_relatedurl>
	<apm_extrainfo></apm_extrainfo>
	<apm_extraedit></apm_extraedit>
	<dependencies>
	</dependencies>
	<codes>
	</codes>
	<templates>
	</templates>
	<stylevardfns>
	</stylevardfns>
	<stylevars>
	</stylevars>
	<plugins>
		<plugin active="1" executionorder="5">
			<title>Deny write in the old threads</title>
			<hookname>newreply_start</hookname>
			<phpcode><![CDATA[$tac_timeline = TIMENOW - (int)$vbulletin->options['tac_time_line'] * 60*60*24;
if ((1 == $threadinfo['open']) AND $threadinfo['lastpost'] < $tac_timeline)
{
    if ( (1 != $threadinfo['sticky']) OR $vbulletin->options['tac_can_stickie_closed'])
    {
        $threadinfo['open'] = 0;
    }
}
unset($tac_timeline);]]></phpcode>
		</plugin>
		<plugin active="1" executionorder="5">
			<title>Mark old thread in view thread</title>
			<hookname>showthread_getinfo</hookname>
			<phpcode><![CDATA[$tac_timeline = TIMENOW - (int)$vbulletin->options['tac_time_line'] * 60*60*24;
if ((1 == $threadinfo['open']) AND $threadinfo['lastpost'] < $tac_timeline)
{
    if ( (1 != $threadinfo['sticky']) OR $vbulletin->options['tac_can_stickie_closed'])
    {
        $threadinfo['open'] = 0;
    }
}
unset($tac_timeline);]]></phpcode>
		</plugin>
		<plugin active="1" executionorder="5">
			<title>Mark old threads in forum display page</title>
			<hookname>threadbit_process</hookname>
			<phpcode><![CDATA[$tac_timeline = TIMENOW - (int)$vbulletin->options['tac_time_line'] * 60*60*24;
if ((1 == $thread['open']) AND $thread['lastpost'] < $tac_timeline)
{
    if ( (1 != $thread['sticky']) OR $vbulletin->options['tac_can_stickie_closed'])
    {
        $thread['status']['lock'] = 'lock';
        $thread['checkbox_value'] += THREAD_FLAG_CLOSED;
    }
}
unset($tac_timeline);]]></phpcode>
		</plugin>
	</plugins>
	<phrases>
		<phrasetype name="vBulletin Settings" fieldname="vbsettings">
			<phrase name="setting_tac_can_stickie_closed_desc" date="1274971481" username="Vitaly" version="0.2"><![CDATA[Set 'Yes', if you need to close sticky threads too.]]></phrase>
			<phrase name="setting_tac_can_stickie_closed_title" date="1274971481" username="Vitaly" version="0.2"><![CDATA[Close sticky threads]]></phrase>
			<phrase name="setting_tac_time_line_desc" date="1274971481" username="Vitaly" version="0.2"><![CDATA[Inactivity period (in days) to close threads.]]></phrase>
			<phrase name="setting_tac_time_line_title" date="1274971481" username="Vitaly" version="0.2"><![CDATA[Thread time line]]></phrase>
			<phrase name="settinggroup_rcd_thread_auto_closing" date="1274971527" username="Vitaly" version=""><![CDATA[Threads Auto Close]]></phrase>
		</phrasetype>
	</phrases>
	<options>
		<settinggroup name="rcd_thread_auto_closing" displayorder="65535">
			<setting varname="tac_time_line" displayorder="10">
				<datatype>integer</datatype>
				<defaultvalue>365</defaultvalue>
			</setting>
			<setting varname="tac_can_stickie_closed" displayorder="20">
				<datatype>boolean</datatype>
				<optioncode>yesno</optioncode>
				<defaultvalue>0</defaultvalue>
			</setting>
		</settinggroup>
	</options>
	<helptopics>
	</helptopics>
	<cronentries>
	</cronentries>
	<faqentries>
	</faqentries>
	<templateedits>
	</templateedits>
</product>
